<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <script type="text/javascript" src="http://use.typekit.net/bsa5hge.js"></script>
        <script type="text/javascript">
        try {
            Typekit.load();
        } catch(e) {}
        </script>

        <script src="/-assets/javascripts/vendor/modernizr.js"></script>

        <link rel="stylesheet" href="/-assets/stylesheets/vendor.css">
        <link rel="stylesheet" href="/-assets/stylesheets/user.css">

        <title>PlaceTime - Timeline</title>
    </head>
    <body>


        <div class="page header"></div>
        <div class="page content"></div>


        <script type="text/template" id="header-template">
            <% if (wide) { %>
            <div class="navbar-inner container-wide">
            <% } else { %>
            <div class="navbar-inner container">
            <% } %>
                <a class="brand pull-left" href="/">
                    <i class="icon-ok-circle"></i>
                    <i class="icon-time"></i>
                    placetime
                </a>

                <a class="tagline pull-left" href="/">a playlist for your life</a>

                <% if (pid !== 'null') { %>
                <ul class="nav pull-right">
                    <li>
                        <a data-dropdown=".navbar .dropdown">
                            <i class="icon-cog"></i>
                        </a>
                    </li>
                </ul>
                <% } %>

                <div class="dropdown dropdown-tip dropdown-anchor-right">
                    <ul class="dropdown-menu">
                        <li>
                            <a class="main-hiddenlink" href="#profile">
                                <i class="icon-user"></i>
                                Profile
                            </a>
                        </li>
                        <li>
                            <a class="main-hiddenlink" href="#logout">
                                <i class="icon-signout"></i>
                                Logout
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </script>


        <script type="text/template" id="login-template">
            <p class="twitter">
                <a href="/-twitter" data-role="button" rel="external">
                    <i class="icon-twitter"></i>
                    Sign in with Twitter
                </a>
            </p>

            <p class="login">
                <a href="#login">Or login / Sign up</a>
            </p>

            <form class="form">
                <div class="field">
                    <label for="name">User name</label>
                    <input type="text" name="pid" id="pid" value="">
                    <div class="hint"></div>
                </div>

                <div class="field">
                    <label for="name">Password</label>
                    <input type="password" name="pwd" id="pwd" value="">
                    <div class="hint"></div>
                </div>

                <input type="submit" value="Login" class="wide">

                <p class="register">
                    <a href="#register">Dont have an account? Sign Up</a>
                </p>
            </form>
        </script>


        <script type="text/template" id="register-template">
            <p class="register">
                <span>Register</span>
            </p>

            <form class="form">
                <div class="field">
                    <label for="name">User name</label>
                    <input type="text" name="pid">
                    <div class="hint"></div>
                </div>

                <div class="field">
                    <label for="email">Email address</label>
                    <input type="text" name="email">
                    <div class="hint"></div>
                </div>

                <div class="field">
                    <label for="name">Full name</label>
                    <input type="text" name="name">
                    <div class="hint"></div>
                </div>

                <div class="field">
                    <label for="name">Password</label>
                    <input type="text" name="pwd">
                    <div class="hint"></div>
                </div>

                <input class="wide" type="submit" value="Register">
            </form>
        </script>


        <script type="text/template" id="profile-template">
            <h1>Edit Profile</h1>

            <form class="form">
                <div class="field">
                    <label for="name">Name</label>
                    <input type="text" name="name" id="name" value="<%= name %>">
                </div>

                <div class="field">
                    <label for="bio">Bio</label>
                    <input type="text" name="bio" id="bio" value="<%= bio %>">
                </div>

                <div class="field">
                    <label for="email">Email</label>
                    <input type="text" name="email" id="email" value="<%= email %>">
                </div>

                <div class="field">
                    <input type="submit" value="Save">
                    <input type="submit" value="Cancel" class="cancel">
                </div>
            </form>
        </script>


        <script type="text/template" id="load-more-template">
            Load more
        </script>


        <script type="text/template" id="no-results-template">
            No more results
        </script>


        <script type="text/template" id="loading-template">
            <img alt="Loading" src="/-assets/images/vendor/jquery/fancybox/fancybox_loading.gif" height="24" width="24" />
        </script>




        <script type="text/template" id="item-template">
            <div class="overlay"></div>

            <p class="sash event">
                <i class="icon-calendar"></i>
            </p>
            <p class="sash added">
                <span>
                    Added to playlist
                    <i class="icon-plus"></i>
                </span>
            </p>


            <% if (media == "video") { %>
            <!-- video specific markup here -->
            <% } else if (media == "audio") { %>
            <!-- audio specific markup here -->
            <% } else { %>
                <div class="icon pull-left">
                    <img src="/-assets/images/user.jpg" width="40" height="40">
                </div>
                <p class="username pull-left">
                    <a href="#user/<%= pid %>"><%= pid %></a>
                </p>
                <p class="text pull-left">
                    <a class="fancybox fancybox.iframe" href="<%= link %>">
                        <i class="icon-external-link"></i>
                        <%= text %>
                    </a>
                </p>

                <% if (pid !== source) { %>
                <p class="source pull-left">
                    <a href="#user/<%= source %>">copied by <%= source %></a>
                </p>
                <% } %>

                <p class="time pull-left">
                    <a class="fancybox fancybox.iframe" href="<%= link %>">
                        <% if (isEvent(ts, event)) { %>
                            <i class="icon-calendar"></i> <span class="event">event:</span>
                        <% } else { %>
                            <i class="icon-time"></i> <span class="added">added:</span>
                        <% } %>
                        <span class="timestamp"><%= time(ts).fromNow() %></span>
                    </a>
                </p>

                <% if (status === 'm') { %>
                    <a class="button demote">
                        <i class="icon-remove"></i>
                    </a>
                <% } else { %>
                    <a class="button promote">
                        <i class="icon-ok"></i>
                    </a>
                <% } %>
            <% } %>

            <hr class="separator" />
        </script>


        <script type="text/template" id="item-add-template">
            <form class="form">
                <div class="field">
                    <label for="link">Link</label>
                    <input type="text" name="link" value="<%= link %>">
                </div>

                <div class="field">
                    <label for="text">Text</label>
                    <input type="text" name="text" value="<%= text %>">
                </div>

                <div class="field">
                    <label for="text">Event Date</label>
                    <input type="date" min="1900-00-00" name="ets" value="<%= ets %>">
                </div>

                <div class="actions">
                    <input type="submit" value="Add" class="add">
                    <input type="submit" value="Cancel" class="cancel">
                </script>
            </form>
        </script>


        <script type="text/template" id="item-empty-template">
            <p>
                <% if (loading === true) { %>
                    <span>Loading results</span>
                    <img alt="Loading" class="loading" src="/-assets/images/vendor/jquery/fancybox/fancybox_loading.gif" height="24" width="24" />
                <% } else { %>
                    <% if (Application.session.get('pid') === user) { %>
                        <% if (status === 'p') { %>
                            There are no items in your timeline, search for users to follow
                        <% } else { %>
                            Add a new item or copy one from your timeline
                        <% } %>
                    <% } else { %>
                        There are no items in <%= user %> timeline
                    <% } %>
                <% } %>
            </p>
        </script>



        <script type="text/template" id="search-empty-template">
            <% if (loading === true) { %>
            <span>Loading search results</span>
            <img alt="Loading" class="loading" src="/-assets/images/vendor/jquery/fancybox/fancybox_loading.gif" height="24" width="24" />
            <% } else { %>
            <span>No results</span>
            <% } %>
        </script>


        <script type="text/template" id="following-template">
            <div class="icon pull-left">
                <img src="/-assets/images/user.jpg" width="40" height="40">
            </div>

            <p class="username pull-left">
                <a href="#user/<%= pid %>"><%= pid %></a>
            </p>

            <% if (bio) { %>
            <p class="bio pull-left">
                <% if (name) { %>
                    <span class="name"><%= name %></span>:
                <% } %>

                <%= bio %>
            </p>
            <% } %>

            <ul class="statistics pull-left">
                <li class="followings">
                    <a href="#followings/<%= pid %>"><%= followingcount %> following</a>
                </li>
                <li class='followers'>
                    <a href="#followers/<%= pid %>"><%= followercount %> followers</a>
                </li>
            </ul>

            <a class="button unfollow">
                <i class="icon-minus"></i>
            </a>
        </script>



        <script type="text/template" id="follower-template">
            <div class="icon pull-left">
                <img src="/-assets/images/user.jpg" width="40" height="40">
            </div>

            <p class="username pull-left">
                <a href="#user/<%= pid %>"><%= pid %></a>
            </p>

            <% if (bio) { %>
            <p class="bio pull-left">
                <%= bio %>
            </p>
            <% } %>

            <ul class="statistics pull-left">
                <li class="followings">
                    <a href="#followings/<%= pid %>"><%= followingcount %> following</a>
                </li>
                <li class='followers'>
                    <a href="#followers/<%= pid %>"><%= followercount %> followers</a>
                </li>
            </ul>

            <!-- TODO: Conditionally display follow/unfollow -->
            <a class="button follow">
                <i class="icon-plus"></i>
            </a>
        </script>


        <script type="template/text" id="timeline-public-header-template">
            <ul class="nav nav-inline pull-left">
                <li class="items <%= (view == 'timeline')? 'active':'' %>">
                    <a href="#timeline">Timeline</a>
                </li>
                <li class="followings <%= (view == 'followings')? 'active':'' %>">
                    <a href="#followings">Following</a>
                </li>
                <li class="followers <%= (view == 'followers')? 'active':'' %>">
                    <a href="#followers">Followers</a>
                </li>
            </ul>


            <form class="form">
                <% if (view === 'timeline') { %>
                    <input class="pull-left search" type="search" placeholder="Search items">
                <% } else { %>
                    <input class="pull-left search" type="search" placeholder="Search profiles">
                <% } %>
            </form>


            <% if (view === 'timeline') { %>
            <a class="now pull-right">
                now <i class="icon-repeat"></i>
            </a>
            <% } %>
        </script>


        <script type="template/text" id="timeline-private-header-template">
            <ul class="nav nav-inline pull-left">
                <li class="items active">
                    <a href="#timeline" class="playlist">My Playlist</a>
                </li>
            </ul>

            <form class="form">
                <input class="pull-left add" type="text" placeholder="domain.com">
                <input class="pull-left submit" type="submit" value="Add">
            </form>

            <% if (view === 'timeline') { %>
            <a class="now pull-right">
                now <i class="icon-repeat"></i>
            </a>
            <% } %>
        </script>


        <script type="template/text" id="timeline-template">
            <% if (status === 'p') { %>
            <div class="timeline public">
            <% } else { %>
            <div class="timeline private">
            <% } %>
                <div class="header"></div>
                <div class="collection"></div>
            </div>
        </script>


        <script type="text/template" id="items-template">
        <div class="scroller">
            <div class="children"></div>
        </div>
        <div class="needle-view"></div>
        </script>


        <script type="text/template" id="followings-template">
        <div class="scroller">
            <div class="children"></div>
        </div>
        </script>



        <script type="text/template" id="followers-template">
        <div class="scroller">
            <div class="children"></div>
        </div>
        </script>


        <script type="text/template" id="searches-template">
        <div class="scroller">
            <div class="children"></div>
        </div>
        </script>


        <script type="text/template" id="search-template">
            <div class="overlay"></div>

            <p class="sash event">
                <i class="icon-calendar"></i>
            </p>
            <p class="sash added">
                <span>
                    Added to playlist
                    <i class="icon-plus"></i>
                </span>
            </p>
            <p class="sash video">
                <i class="icon-facetime-video"></i>
            </p>
            <p class="sash audio">
                <i class="icon-headphones"></i>
            </p>

            <div class="icon pull-left">
                <img src="/-assets/images/user.jpg" width="40" height="40">
            </div>
            <p class="username pull-left">
                <a href="#user/<%= pid %>"><%= pid %></a>
            </p>




            <% if (media == "video") { %>
                <p class="text pull-left">
                    <a class="fancybox fancybox.iframe" href="<%= getIframeUrl(link) %>">
                        <i class="icon-play-circle"></i>
                        <%= text %>
                    </a>
                </p>

                <% if (pid !== source) { %>
                <p class="source pull-left">
                    <a href="#user/<%= source %>">copied by <%= source %></a>
                </p>
                <% } %>
            <% } else if (media == "audio") { %>
            <!-- audio specific markup here -->
            <% } else { %>
                <p class="text pull-left">
                    <a class="fancybox fancybox.iframe" href="<%= link %>">
                        <i class="icon-external-link"></i>
                        <%= text %>
                    </a>
                </p>

                <% if (pid !== source) { %>
                <p class="source pull-left">
                    <a href="#user/<%= source %>">copied by <%= source %></a>
                </p>
                <% } %>

                <p class="time pull-left">
                    <a class="fancybox fancybox.iframe" href="<%= link %>">
                        <% if (isEvent(ts, event)) { %>
                            <i class="icon-calendar"></i> <span class="event">event:</span>
                        <% } else { %>
                            <i class="icon-time"></i> <span class="added">added:</span>
                        <% } %>
                        <span class="timestamp"><%= time(ts).fromNow() %></span>
                    </a>
                </p>
            <% } %>

            <a class="button promote">
                <i class="icon-ok"></i>
            </a>
        </script>



        <script type="text/template" id="needle-template">
            <div class="date">
                <span class="value"></span>
                <i class="icon-repeat"></i>
            </div>
        </script>

        <script type="text/template" id="needle-now-template">
        <div class="date">
            <span class="future pull-left">
                <i class="icon-arrow-up"></i> Future
            </span>
            <span class="now">
                Now
                <i class="icon-repeat"></i>
            </span>
            <span class="past pull-right">
               Past <i class="icon-arrow-down"></i>
            </span>
        </div>
        </script>


        <script type="text/template" id="timelines-template">
            <div class="timeline-public"></div>
            <div class="timeline-private"></div>
        </script>


        <script src="/-assets/javascripts/vendor.js"></script>
        <script src="/-assets/javascripts/application.js"></script>

        <script type="text/javascript">
        Application.start({
            router: 'user'
        });
        </script>
    </body>
</html>
